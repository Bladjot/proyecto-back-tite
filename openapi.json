{"openapi":"3.0.0","paths":{"/api/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"201":{"description":""}}}},"/api/auth/register":{"post":{"operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterDto"}}}},"responses":{"201":{"description":""}}}},"/api/auth/me":{"get":{"operationId":"AuthController_getProfile","parameters":[],"responses":{"200":{"description":""}}}},"/api/auth/google":{"get":{"operationId":"AuthController_googleAuth","parameters":[],"responses":{"200":{"description":""}}}},"/api/auth/google/callback":{"get":{"operationId":"AuthController_googleAuthRedirect","parameters":[],"responses":{"200":{"description":""}}}},"/api/users":{"post":{"operationId":"UsersController_create","summary":"Crear un nuevo usuario","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"Usuario creado exitosamente"},"400":{"description":"Datos inválidos"}},"tags":["Users"],"security":[{"bearer":[]}]},"get":{"operationId":"UsersController_findAll","summary":"Obtener todos los usuarios (solo admin)","parameters":[],"responses":{"200":{"description":"Lista de usuarios retornada"},"403":{"description":"No autorizado"}},"tags":["Users"],"security":[{"bearer":[]}]}},"/api/users/{id}":{"get":{"operationId":"UsersController_findOne","summary":"Obtener un usuario por ID (permiso: ver_usuario)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Usuario encontrado"},"404":{"description":"Usuario no encontrado"}},"tags":["Users"],"security":[{"bearer":[]}]},"patch":{"operationId":"UsersController_update","summary":"Actualizar un usuario (permiso: editar_usuario)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":"Usuario actualizado"},"404":{"description":"Usuario no encontrado"}},"tags":["Users"],"security":[{"bearer":[]}]},"delete":{"operationId":"UsersController_remove","summary":"Eliminar un usuario (solo admin)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Usuario eliminado"},"404":{"description":"Usuario no encontrado"}},"tags":["Users"],"security":[{"bearer":[]}]}},"/api/roles":{"post":{"operationId":"RolesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRoleDto"}}}},"responses":{"201":{"description":""}},"tags":["Roles"],"security":[{"bearer":[]}]},"get":{"operationId":"RolesController_findAll","parameters":[],"responses":{"200":{"description":""}},"tags":["Roles"],"security":[{"bearer":[]}]}},"/api/roles/{id}":{"get":{"operationId":"RolesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Roles"],"security":[{"bearer":[]}]},"patch":{"operationId":"RolesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Roles"],"security":[{"bearer":[]}]},"delete":{"operationId":"RolesController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Roles"],"security":[{"bearer":[]}]}},"/api/permisos":{"post":{"operationId":"PermisosController_create","summary":"Crear un nuevo permiso","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePermisoDto"}}}},"responses":{"201":{"description":""}},"tags":["Permisos"]},"get":{"operationId":"PermisosController_findAll","summary":"Listar permisos","parameters":[],"responses":{"200":{"description":""}},"tags":["Permisos"]}},"/api/permisos/{id}":{"get":{"operationId":"PermisosController_findOne","summary":"Obtener permiso por ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Permisos"]},"patch":{"operationId":"PermisosController_update","summary":"Actualizar un permiso","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePermisoDto"}}}},"responses":{"200":{"description":""}},"tags":["Permisos"]},"delete":{"operationId":"PermisosController_remove","summary":"Eliminar un permiso","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Permisos"]}},"/api/roles-permisos":{"post":{"operationId":"RolesPermisosController_create","summary":"Asignar un permiso a un rol","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRolePermisoDto"}}}},"responses":{"201":{"description":"Permiso asignado al rol"}},"tags":["Roles-Permisos"]},"get":{"operationId":"RolesPermisosController_findAll","summary":"Listar todas las asignaciones de roles-permisos","parameters":[],"responses":{"200":{"description":""}},"tags":["Roles-Permisos"]}},"/api/roles-permisos/{id}":{"get":{"operationId":"RolesPermisosController_findOne","summary":"Obtener una asignación de rol-permiso por ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Roles-Permisos"]},"patch":{"operationId":"RolesPermisosController_update","summary":"Actualizar una asignación de rol-permiso","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateRolePermisoDto"}}}},"responses":{"200":{"description":""}},"tags":["Roles-Permisos"]},"delete":{"operationId":"RolesPermisosController_remove","summary":"Eliminar una asignación de rol-permiso","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Roles-Permisos"]}},"/api/verificaciones-correo":{"post":{"operationId":"VerificacionesCorreoController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateVerificacionCorreoDto"}}}},"responses":{"201":{"description":""}}},"get":{"operationId":"VerificacionesCorreoController_findAll","parameters":[],"responses":{"200":{"description":""}}}},"/api/verificaciones-correo/{id}":{"get":{"operationId":"VerificacionesCorreoController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}},"patch":{"operationId":"VerificacionesCorreoController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateVerificacionCorreoDto"}}}},"responses":{"200":{"description":""}}},"delete":{"operationId":"VerificacionesCorreoController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}}},"info":{"title":"API Auth & Profiles - GPI","description":"Documentación de los endpoints de Autenticación y Perfiles","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"LoginDto":{"type":"object","properties":{"email":{"type":"string","example":"juan@example.com","description":"Correo electrónico del usuario"},"password":{"type":"string","example":"123456","description":"Contraseña del usuario"}},"required":["email","password"]},"RegisterDto":{"type":"object","properties":{"name":{"type":"string","example":"Juan","description":"Nombre del usuario"},"lastName":{"type":"string","example":"Pérez","description":"Apellido del usuario"},"email":{"type":"string","example":"juan@example.com","description":"Correo electrónico único"},"password":{"type":"string","example":"123456","description":"Contraseña (mínimo 6 caracteres)","minLength":6}},"required":["name","lastName","email","password"]},"CreateUserDto":{"type":"object","properties":{"name":{"type":"string","example":"Juan","description":"Nombre del usuario"},"lastName":{"type":"string","example":"Pérez","description":"Apellido del usuario"},"email":{"type":"string","example":"juan@example.com","description":"Correo electrónico único"},"password":{"type":"string","example":"password123","description":"Contraseña del usuario (mínimo 6 caracteres)"},"roles":{"example":["cliente"],"description":"Lista de roles asignados al usuario","type":"array","items":{"type":"array"}},"permisos":{"example":["crear_producto","ver_pedidos"],"description":"Lista de permisos explícitos asignados","type":"array","items":{"type":"array"}},"isActive":{"type":"boolean","example":true,"description":"Indica si la cuenta está activa"}},"required":["name","lastName","email","password"]},"UpdateUserDto":{"type":"object","properties":{"name":{"type":"string","example":"Juan actualizado","description":"Nuevo nombre del usuario"},"lastName":{"type":"string","example":"Pérez modificado","description":"Nuevo apellido del usuario"},"password":{"type":"string","example":"1234567","description":"Nueva contraseña (mínimo 6 caracteres)","minLength":6},"role":{"type":"string","example":"admin","description":"Nuevo rol del usuario"},"isActive":{"type":"boolean","example":false,"description":"Cambia el estado del usuario a inactivo"}}},"CreateRoleDto":{"type":"object","properties":{"codigo":{"type":"string","example":"admin","description":"Código único del rol"},"nombre":{"type":"string","example":"Administrador","description":"Nombre visible del rol"},"descripcion":{"type":"string","example":"Acceso completo al sistema","description":"Descripción del rol"}},"required":["codigo","nombre","descripcion"]},"CreatePermisoDto":{"type":"object","properties":{"codigo":{"type":"string","example":"crear_producto","description":"Código único del permiso"},"nombre":{"type":"string","example":"Crear Producto","description":"Nombre visible del permiso"},"descripcion":{"type":"string","example":"Permite a un usuario crear productos","description":"Descripción del permiso"}},"required":["codigo","nombre","descripcion"]},"UpdatePermisoDto":{"type":"object","properties":{"codigo":{"type":"string","description":"Código único del permiso"},"nombre":{"type":"string","description":"Nombre del permiso"},"descripcion":{"type":"string","description":"Descripción del permiso"}}},"CreateRolePermisoDto":{"type":"object","properties":{"rolId":{"type":"string","description":"ID del rol relacionado"},"permisoId":{"type":"string","description":"ID del permiso relacionado"}},"required":["rolId","permisoId"]},"UpdateRolePermisoDto":{"type":"object","properties":{"rolId":{"type":"string","description":"ID del rol relacionado"},"permisoId":{"type":"string","description":"ID del permiso relacionado"}}},"CreateVerificacionCorreoDto":{"type":"object","properties":{"correo":{"type":"string","example":"juan@example.com","description":"Correo a verificar"},"token":{"type":"string","example":"abc123","description":"Token de verificación enviado al correo"},"verificado":{"type":"boolean","example":false,"description":"Si el correo ya fue verificado"}},"required":["correo","token","verificado"]},"UpdateVerificacionCorreoDto":{"type":"object","properties":{"correo":{"type":"string","description":"Correo del usuario asociado"},"token":{"type":"string","description":"Token de verificación de correo"},"verificado":{"type":"boolean","description":"Indica si el correo ya fue verificado"}}}}}}